<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ys-text-annotation</title>
    <style>
      .container {
        margin-inline: auto;
        width: 100%;
        height: 750px;
        border: 1px solid red;
      }
    </style>
    <script type="module" src="/src/ys-text-annotation.ts"></script>
  </head>
  <body>
    <div class="container">
      <ys-text-annotation id="annotation-component"></ys-text-annotation>
    </div>
    <script type="module">
      import { mockContent, mockAnnotation, mockRelationship, defaultAnnotationTypes, defaultRelationshipTypes } from '/src/mock.ts'

      // ç­‰å¾…ç»„ä»¶åŠ è½½å®Œæˆ
      window.addEventListener('DOMContentLoaded', () => {
        const component = document.getElementById('annotation-component')
        if (component) {
          // ä½¿ç”¨ç»Ÿä¸€åˆå§‹åŒ–æ–¹æ³•
          component.init({
            editable: true, // å¼€å¯ç¼–è¾‘æ¨¡å¼
            content: mockContent, // æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹
            annotationType: defaultAnnotationTypes, // æ ‡æ³¨ç±»å‹
            relationshipType: defaultRelationshipTypes // å…³ç³»ç±»å‹
            // é»˜è®¤åˆ›å»ºå…³ç³»
            // relationshipTypeResolver: (sid, eid) => {
            //   console.log('ğŸš€ ~ sid:', sid)
            //   console.log('ğŸš€ ~ eid:', eid)
            //   return 'å› æœå…³ç³»'
            // },
            // relationshipTypeFilter: (lines, sid, eid) => {
            //   return [{ type: 'å…³è”/ç¤¾äº¤', color: '#E91E63' }]
            // },
            // annotationValidator: (sinfo, nodes) => {
            //   console.log('ğŸš€ ~ sinfo:', sinfo)
            //   console.log('ğŸš€ ~ nodes:', nodes)
            //   return { valid: true }
            // },
            // annotationConfirmValidator: (node, nodes) => {
            //   console.log('ğŸš€ ~ node:', node)
            //   console.log('ğŸš€ ~ nodes:', nodes)
            //   return { valid: true }
            // },
            // relationshipValidator: (sid, eid, lines) => {
            //   console.log('ğŸš€ ~ sid:', sid)
            //   console.log('ğŸš€ ~ eid:', eid)
            //   console.log('ğŸš€ ~ lines:', lines)
            //   return { valid: false }
            // }
          })

          component.setData({
            annotations: mockAnnotation,
            relationships: mockRelationship
          })

          const data = component.getData()
          console.log('ğŸš€ ~ åˆå§‹åŒ–æ•°æ®:', data)

          // ç›‘å¬æ•°æ®å˜åŒ–äº‹ä»¶
          component.addEventListener('data-change', e => {
            console.log('ğŸ“¢ æ•°æ®å˜åŒ–äº†:', e.detail)
            console.log('  - annotations:', e.detail.annotations)
            console.log('  - relationships:', e.detail.relationships)
          })
        }
      })
    </script>
  </body>
</html>
